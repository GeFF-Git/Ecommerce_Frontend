    <div class="category-details-container">
      <div class="header">
        <div class="header-content">
          <button mat-button routerLink="/categories" class="back-button">
            <mat-icon>arrow_back</mat-icon>
            Back to Categories
          </button>
          <div class="header-actions" *ngIf="category">
            <button mat-stroked-button [routerLink]="['/categories', category.categoryId, 'edit']">
              <mat-icon>edit</mat-icon>
              Edit Category
            </button>
            <button mat-stroked-button [routerLink]="['/categories', category.categoryId, 'attributes']">
              <mat-icon>tune</mat-icon>
              Manage Attributes
            </button>
            <button mat-stroked-button
                    *ngIf="!category.isActive"
                    (click)="enableCategory()"
                    color="primary">
              <mat-icon>check_circle</mat-icon>
              Enable
            </button>
            <button mat-stroked-button
                    *ngIf="category.isActive"
                    (click)="deleteCategory()"
                    color="warn">
              <mat-icon>cancel</mat-icon>
              Disable
            </button>
          </div>
        </div>
      </div>

      <div *ngIf="category$ | async as category; else loading">
        <!-- Basic Information Card -->
        <mat-card class="info-card">
          <mat-card-header>
            <mat-card-title class="category-title">
              {{category.categoryName}}
              <mat-chip [class.active-status]="category.isActive"
                       [class.inactive-status]="!category.isActive"
                       class="status-chip">
                {{category.isActive ? 'Active' : 'Inactive'}}
              </mat-chip>
            </mat-card-title>
            <mat-card-subtitle *ngIf="category.categoryDescription">
              {{category.categoryDescription}}
            </mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <div class="category-stats">
              <div class="stat-item">
                <mat-icon>tune</mat-icon>
                <div>
                  <label>Total Attributes</label>
                  <p>{{category.attributes.length}}</p>
                </div>
              </div>
              <div class="stat-item">
                <mat-icon>check_circle</mat-icon>
                <div>
                  <label>Active Attributes</label>
                  <p>{{getActiveAttributesCount(category)}}</p>
                </div>
              </div>
              <div class="stat-item">
                <mat-icon>inventory</mat-icon>
                <div>
                  <label>Products in Category</label>
                  <p>{{(categoryProducts$ | async)?.length || 0}}</p>
                </div>
              </div>
            </div>
          </mat-card-content>
        </mat-card>

        <!-- Attributes Card -->
        <mat-card class="attributes-card" *ngIf="category.attributes && category.attributes.length > 0">
          <mat-card-header>
            <mat-card-title>
              <mat-icon>tune</mat-icon>
              Category Attributes
            </mat-card-title>
            <div class="header-actions">
              <button mat-raised-button color="primary"
                      [routerLink]="['/categories', category.categoryId, 'attributes']">
                <mat-icon>edit</mat-icon>
                Manage Attributes
              </button>
            </div>
          </mat-card-header>
          <mat-card-content>
            <table mat-table [dataSource]="category.attributes" class="attributes-table">
              <!-- Attribute Name -->
              <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef>Attribute Name</th>
                <td mat-cell *matCellDef="let attr">
                  <div class="attribute-info">
                    <strong>{{attr.attributeDisplayName}}</strong>
                    <small>{{attr.attributeName}}</small>
                  </div>
                </td>
              </ng-container>

              <!-- Data Type -->
              <ng-container matColumnDef="dataType">
                <th mat-header-cell *matHeaderCellDef>Data Type</th>
                <td mat-cell *matCellDef="let attr">
                  <mat-chip class="data-type-chip">{{getDataTypeName(attr.dataTypeId)}}</mat-chip>
                </td>
              </ng-container>

              <!-- Status -->
              <ng-container matColumnDef="status">
                <th mat-header-cell *matHeaderCellDef>Status</th>
                <td mat-cell *matCellDef="let attr">
                  <mat-chip [class.active-status]="attr.isActive"
                           [class.inactive-status]="!attr.isActive">
                    {{attr.isActive ? 'Active' : 'Inactive'}}
                  </mat-chip>
                </td>
              </ng-container>

              <!-- Actions -->
              <ng-container matColumnDef="actions">
                <th mat-header-cell *matHeaderCellDef>Actions</th>
                <td mat-cell *matCellDef="let attr">
                  <div class="attribute-actions">
                    <button mat-icon-button
                            *ngIf="!attr.isActive"
                            (click)="enableAttribute(attr.attributeId)"
                            matTooltip="Enable Attribute"
                            color="primary">
                      <mat-icon>check_circle</mat-icon>
                    </button>
                    <button mat-icon-button
                            *ngIf="attr.isActive"
                            (click)="deleteAttribute(attr.attributeId)"
                            matTooltip="Disable Attribute"
                            color="warn">
                      <mat-icon>cancel</mat-icon>
                    </button>
                  </div>
                </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="attributeColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: attributeColumns;"></tr>
            </table>
          </mat-card-content>
        </mat-card>

        <!-- No Attributes Message -->
        <mat-card class="no-attributes-card" *ngIf="!category.attributes || category.attributes.length === 0">
          <mat-card-content>
            <div class="no-attributes-content">
              <mat-icon>info</mat-icon>
              <p>This category doesn't have any attributes defined.</p>
              <button mat-raised-button color="primary"
                      [routerLink]="['/categories', category.categoryId, 'attributes']">
                <mat-icon>add</mat-icon>
                Add Attributes
              </button>
            </div>
          </mat-card-content>
        </mat-card>

        <!-- Products in Category -->
        <mat-card class="products-card" *ngIf="categoryProducts$ | async as products">
          <mat-card-header>
            <mat-card-title>
              <mat-icon>inventory</mat-icon>
              Products in this Category ({{products.length}})
            </mat-card-title>
            <div class="header-actions">
              <button mat-raised-button color="primary" routerLink="/products/create">
                <mat-icon>add</mat-icon>
                Add Product
              </button>
            </div>
          </mat-card-header>
          <mat-card-content>
            <div *ngIf="products.length > 0; else noProducts">
              <div class="products-grid">
                <div *ngFor="let product of products.slice(0, 6)" class="product-card">
                  <div class="product-info">
                    <h4>{{product.productName}}</h4>
                    <p class="product-sku">{{product.productSku}}</p>
                    <div class="product-meta">
                      <span class="price">{{formatPrice(product.salePrice)}}</span>
                      <span class="stock" [class.low-stock]="product.stockQuantity < 10">
                        Stock: {{product.stockQuantity}}
                      </span>
                    </div>
                    <mat-chip [class.active-status]="product.isActive"
                             [class.inactive-status]="!product.isActive"
                             class="status-chip">
                      {{product.isActive ? 'Active' : 'Inactive'}}
                    </mat-chip>
                  </div>
                  </div>
                </div>
              </div>
              <div *ngIf="products.length > 6" class="view-all-products">
                <button mat-stroked-button routerLink="/products" [queryParams]="{categoryId: category.categoryId}">
                  View All {{products.length}} Products
                  <mat-icon>arrow_forward</mat-icon>
                </button>
              </div>
            <!-- </div> -->
            <ng-template #noProducts>
              <div class="no-products">
                <mat-icon>inventory</mat-icon>
                <p>No products in this category yet.</p>
                <button mat-raised-button color="primary" routerLink="/products/create">
                  <mat-icon>add</mat-icon>
                  Create First Product
                </button>
              </div>
            </ng-template>
          </mat-card-content>
        </mat-card>
      </div>

      <ng-template #loading>
        <div class="loading-container">
          <p>Loading category details...</p>
        </div>
      </ng-template>
    </div>
